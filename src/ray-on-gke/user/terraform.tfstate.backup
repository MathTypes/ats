{
  "version": 4,
  "terraform_version": "1.4.5",
  "serial": 255,
  "lineage": "c39476be-6a7e-bc76-198e-f2780474dd7f",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "google_client_config",
      "name": "provider",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_token": "ya29.a0Ael9sCPfOe5kx4JJq1n-J6pArXDKKzTENrelaikGX37qsY-gVGhKg4Bfe3Mt4z6T9XV17P8bZaYpfMbWbH2WTjmiSGbcNKf3KmqhmxwP5ZWjzO51uvXCdMbofUR29dol4rLGbdkjzSRG8pzx_9WcpnpYg8RoyprBaCgYKAbkSARISFQF4udJh59zGvvGj9ZEfXFUVoZKKGA0167",
            "id": "projects/vibrant-retina-379605/regions//zones/",
            "project": "vibrant-retina-379605",
            "region": "",
            "zone": ""
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.jupyterhub",
      "mode": "managed",
      "type": "helm_release",
      "name": "jupyterhub",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "atomic": false,
            "chart": "jupyterhub",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "jupyterhub",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "3.0.0",
                "chart": "jupyterhub",
                "name": "jupyterhub",
                "namespace": "ray",
                "revision": 1,
                "values": "{\"hub\":{\"config\":{\"Authenticator\":{\"admin_users\":[\"user1\",\"user2\"],\"allowed_users\":[\"user3\",\"user4\"]},\"DummyAuthenticator\":{\"password\":\"qiu7788lz\"},\"JupyterHub\":{\"authenticator_class\":\"dummy\"}}},\"singleuser\":{\"cmd\":null,\"image\":{\"name\":\"jupyter/tensorflow-notebook\",\"tag\":\"latest\"},\"nodeSelector\":{\"iam.gke.io/gke-metadata-server-enabled\":\"true\"}}}",
                "version": "2.0.0"
              }
            ],
            "name": "jupyterhub",
            "namespace": "ray",
            "pass_credentials": false,
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://jupyterhub.github.io/helm-chart",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 300,
            "values": [
              "# Copyright 2023 Google LLC\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nhub:\n  config:\n    Authenticator:\n      admin_users:\n        - user1\n        - user2\n      allowed_users:\n        - user3\n        - user4\n    # ...\n    DummyAuthenticator:\n      password: qiu7788lz\n    JupyterHub:\n      authenticator_class: dummy\n\nsingleuser:\n  nodeSelector:\n    iam.gke.io/gke-metadata-server-enabled: \"true\"\n  image:\n    # You should replace the \"latest\" tag with a fixed version from:\n    # https://hub.docker.com/r/jupyter/datascience-notebook/tags/\n    # Inspect the Dockerfile at:\n    # https://github.com/jupyter/docker-stacks/tree/HEAD/datascience-notebook/Dockerfile\n    name: jupyter/tensorflow-notebook\n    tag: latest\n  # `cmd: null` allows the custom CMD of the Jupyter docker-stacks to be used\n  # which performs further customization on startup.\n  cmd: null\n"
            ],
            "verify": false,
            "version": "2.0.0",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml",
            "module.kubernetes.kubectl_manifest.fluentd_config",
            "module.kubernetes.kubernetes_namespace.ml"
          ]
        }
      ]
    },
    {
      "module": "module.kubernetes",
      "mode": "data",
      "type": "local_file",
      "name": "fluentd_config_yaml",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "# Copyright 2023 Google LLC\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: fluentbit-config\ndata:\n  fluent-bit.conf: |\n    [INPUT]\n        Name tail\n        Path /tmp/ray/session_latest/logs/*\n        Tag ray\n        Path_Key true\n        Refresh_Interval 5\n    [OUTPUT]\n        Name stdout\n        Match *\n",
            "content_base64": "IyBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiMKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgphcGlWZXJzaW9uOiB2MQpraW5kOiBDb25maWdNYXAKbWV0YWRhdGE6CiAgbmFtZTogZmx1ZW50Yml0LWNvbmZpZwpkYXRhOgogIGZsdWVudC1iaXQuY29uZjogfAogICAgW0lOUFVUXQogICAgICAgIE5hbWUgdGFpbAogICAgICAgIFBhdGggL3RtcC9yYXkvc2Vzc2lvbl9sYXRlc3QvbG9ncy8qCiAgICAgICAgVGFnIHJheQogICAgICAgIFBhdGhfS2V5IHRydWUKICAgICAgICBSZWZyZXNoX0ludGVydmFsIDUKICAgIFtPVVRQVVRdCiAgICAgICAgTmFtZSBzdGRvdXQKICAgICAgICBNYXRjaCAqCg==",
            "content_base64sha256": "FuIyFQeLnh5i0AIA+lh2ngybrrMP4x6dl6+GIOfMRDg=",
            "content_base64sha512": "4B4lNiQOyn6LLGd/ixB6gynhbN19JRMG1tCcgUzJvf2HJy0Lkhz0rFLb3ZFSnxOS38BySTk2v2unr3MET6RkeA==",
            "content_md5": "c74f0a00011f5448d3cf930975eaa1fc",
            "content_sha1": "b9bd04be1f4303afd6e1400cd460848d7d0b8aed",
            "content_sha256": "16e23215078b9e1e62d00200fa58769e0c9baeb30fe31e9d97af8620e7cc4438",
            "content_sha512": "e01e2536240eca7e8b2c677f8b107a8329e16cdd7d251306d6d09c814cc9bdfd87272d0b921cf4ac52dbdd91529f1392dfc072493936bf6ba7af73044fa46478",
            "filename": "modules/kubernetes/config/fluentd_config.yaml",
            "id": "b9bd04be1f4303afd6e1400cd460848d7d0b8aed"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.kubernetes",
      "mode": "managed",
      "type": "kubectl_manifest",
      "name": "fluentd_config",
      "provider": "provider[\"registry.terraform.io/alekc/kubectl\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "api_version": "v1",
            "apply_only": false,
            "force_conflicts": false,
            "force_new": false,
            "id": "/api/v1/namespaces/ray/configmaps/fluentbit-config",
            "ignore_fields": null,
            "kind": "ConfigMap",
            "live_manifest_incluster": "4f78e56382afdb46fd6a63227537f1cf8a7ab8a79b19449feaec51da9d36a278",
            "live_uid": "d237f385-b6a8-4e45-9500-e403313f2b9c",
            "name": "fluentbit-config",
            "namespace": "ray",
            "override_namespace": "ray",
            "sensitive_fields": null,
            "server_side_apply": false,
            "timeouts": null,
            "uid": "d237f385-b6a8-4e45-9500-e403313f2b9c",
            "validate_schema": true,
            "wait": null,
            "wait_for": [],
            "wait_for_rollout": true,
            "yaml_body": "# Copyright 2023 Google LLC\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: fluentbit-config\ndata:\n  fluent-bit.conf: |\n    [INPUT]\n        Name tail\n        Path /tmp/ray/session_latest/logs/*\n        Tag ray\n        Path_Key true\n        Refresh_Interval 5\n    [OUTPUT]\n        Name stdout\n        Match *\n",
            "yaml_body_parsed": "apiVersion: v1\ndata:\n  fluent-bit.conf: |\n    [INPUT]\n        Name tail\n        Path /tmp/ray/session_latest/logs/*\n        Tag ray\n        Path_Key true\n        Refresh_Interval 5\n    [OUTPUT]\n        Name stdout\n        Match *\nkind: ConfigMap\nmetadata:\n  name: fluentbit-config\n  namespace: ray\n",
            "yaml_incluster": "4f78e56382afdb46fd6a63227537f1cf8a7ab8a79b19449feaec51da9d36a278"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml"
          ]
        }
      ]
    },
    {
      "module": "module.kubernetes",
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "ml",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "ray",
            "metadata": [
              {
                "annotations": null,
                "generate_name": "",
                "generation": 0,
                "labels": null,
                "name": "ray",
                "resource_version": "447321",
                "uid": "10faf355-4f6d-41fa-85aa-c563987aea0a"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.service_accounts",
      "mode": "managed",
      "type": "google_project_iam_binding",
      "name": "monitoring-viewer",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwX5sfAIQZM=",
            "id": "vibrant-retina-379605/roles/monitoring.viewer",
            "members": [
              "serviceAccount:vibrant-retina-379605.svc.id.goog[ray/default]"
            ],
            "project": "vibrant-retina-379605",
            "role": "roles/monitoring.viewer"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml",
            "module.kubernetes.kubectl_manifest.fluentd_config",
            "module.kubernetes.kubernetes_namespace.ml"
          ]
        }
      ]
    },
    {
      "module": "module.service_accounts",
      "mode": "managed",
      "type": "google_service_account",
      "name": "sa",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "ray-gmp-account",
            "description": "",
            "disabled": false,
            "display_name": "Managed prometheus service account",
            "email": "ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com",
            "id": "projects/vibrant-retina-379605/serviceAccounts/ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com",
            "member": "serviceAccount:ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com",
            "name": "projects/vibrant-retina-379605/serviceAccounts/ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com",
            "project": "vibrant-retina-379605",
            "timeouts": null,
            "unique_id": "117940484199196896114"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml",
            "module.kubernetes.kubectl_manifest.fluentd_config",
            "module.kubernetes.kubernetes_namespace.ml"
          ]
        }
      ]
    },
    {
      "module": "module.service_accounts",
      "mode": "managed",
      "type": "google_service_account_iam_binding",
      "name": "workload-identity-user",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwX5se/m13s=",
            "id": "projects/vibrant-retina-379605/serviceAccounts/ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com/roles/iam.workloadIdentityUser",
            "members": [
              "serviceAccount:vibrant-retina-379605.svc.id.goog[ray/default]"
            ],
            "role": "roles/iam.workloadIdentityUser",
            "service_account_id": "projects/vibrant-retina-379605/serviceAccounts/ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml",
            "module.kubernetes.kubectl_manifest.fluentd_config",
            "module.kubernetes.kubernetes_namespace.ml",
            "module.service_accounts.google_service_account.sa"
          ]
        }
      ]
    },
    {
      "module": "module.service_accounts",
      "mode": "managed",
      "type": "kubernetes_annotations",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {
              "iam.gke.io/gcp-service-account": "ray-gmp-account@vibrant-retina-379605.iam.gserviceaccount.com"
            },
            "api_version": "v1",
            "field_manager": "Terraform",
            "force": null,
            "id": "apiVersion=v1,kind=ServiceAccount,name=default",
            "kind": "ServiceAccount",
            "metadata": [
              {
                "name": "default",
                "namespace": ""
              }
            ],
            "template_annotations": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.kubernetes.data.local_file.fluentd_config_yaml",
            "module.kubernetes.kubectl_manifest.fluentd_config",
            "module.kubernetes.kubernetes_namespace.ml",
            "module.service_accounts.google_service_account.sa"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
